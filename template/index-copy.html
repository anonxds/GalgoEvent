<!DOCTYPE html>
{% load static %}
<html lang="en">
    {% load pwa %}

<head>
<title>Maruti Admin</title>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css'%}" />
<link rel="stylesheet" href="{% static 'css/bootstrap-responsive.min.css'%}" />
<link rel="stylesheet" href="{% static 'css/fullcalendar.css'%}" />
<link rel="stylesheet" href="{% static 'css/maruti-style.css'%}" />
<link rel="stylesheet" href="{% static 'css/maruti-media.css'%}" class="skin-color" />

</head>
<body>
    {% progressive_web_app_meta %}

<!--Header-part-->
<div id="header">
  <h1><a href="dashboard.html">Maruti Admin</a></h1>
</div>
<!--close-Header-part--> 

<!--top-Header-messaages-->
<div class="btn-group rightzero"> <a class="top_message tip-left" title="Manage Files"><i class="icon-file"></i></a> <a class="top_message tip-bottom" title="Manage Users"><i class="icon-user"></i></a> <a class="top_message tip-bottom" title="Manage Comments"><i class="icon-comment"></i><span class="label label-important">5</span></a> <a class="top_message tip-bottom" title="Manage Orders"><i class="icon-shopping-cart"></i></a> </div>
<!--close-top-Header-messaages--> 

<!--top-Header-menu-->
<div id="user-nav" class="navbar navbar-inverse">
  <ul class="nav">
     <li class=""><a title="" href="{% url 'logout' %}"><i class="icon icon-share-alt"></i> <span class="text">Logout</span></a></li>
  </ul>
</div>

<!--close-top-Header-menu-->

<div id="sidebar"><a href="#" class="visible-phone"><i class="icon icon-home"></i> Dashboard</a><ul>
  <li class="active"><a href="{% url 'index' %}"><i class="icon icon-home"></i> <span>Home</span></a> </li>
    <li class="active"><a href="{% url 'crear_evento' %}"><i class="icon icon-globe"></i> <span>Crear &amp; Eventos</span></a> </li>
    <li> <a href="{% url 'ver_eventos' %}"><i class="icon icon-pencil"></i> <span>Editar &amp; Eventos</span></a> </li>
    <li> <a href="{% url 'information' %}"><i class="icon-info-sign"></i> <span>Ayuda</span></a> </li>

  </ul>
</div>
<div id="content">
  <div id="content-header">
  </div>
  <div class="container-fluid">

</div>
</div>
<div class="row-fluid">
  <div id="footer" class="span12">Disenado para ITT </div>
</div>
<script src="{% static 'js/excanvas.min.js'%}"></script> 
<script src="{% static 'js/jquery.min.js'%}"></script> 
<script src="{% static 'js/jquery.ui.custom.js'%}"></script> 
<script src="{% static 'js/bootstrap.min.js'%}"></script> 
<script src="{% static 'js/jquery.flot.min.js'%}"></script> 
<script src="{% static 'js/jquery.flot.resize.min.js'%}"></script> 
<script src="{% static 'js/jquery.peity.min.js'%}"></script> 
<script src="{% static 'js/fullcalendar.min.js'%}"></script> 
<script src="{% static 'js/maruti.js'%}"></script> 
<script src="{% static 'js/maruti.dashboard.js'%}"></script> 
<script src="{% static 'js/maruti.chat.js'%}"></script> 
<script src="https://www.gstatic.com/firebasejs/7.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.10.0/firebase-storage.js"></script>

<script src="https://www.gstatic.com/firebasejs/7.10.0/firebase-messaging.js"></script>

<script type="text/javascript">

var firebaseConfig = {
    apiKey: "AIzaSyBSIAwxO5geJSslxclj68G33dZ-yumOEMI",
    authDomain: "mapstec-81290.firebaseapp.com",
    databaseURL: "https://mapstec-81290.firebaseio.com",
    projectId: "mapstec-81290",
    storageBucket: "mapstec-81290.appspot.com",
    messagingSenderId: "99396857968",
    appId: "1:99396857968:web:d1023241ff1551546004b5",
    measurementId: "G-85RHV43HWV"
  };
  firebase.initializeApp(firebaseConfig);

let messaging = firebase.messaging();

if('serviceWorker' in navigator){
  navigator.serviceWorker.register("/serviceworker.js",{
    scope: '.'
  }).then(function (registration){
    console.log("Y")
    messaging.useServiceWorker(registration);
    messaging.requestPermission()
  .then(function(){
    return messaging.getToken();
  })
  .then(function(token){
    console.log(token)

    fetch("/guardar-token/",{
      method:"post",
      headers:{
        'Content-Type':"application/json",
        "Accept":"application/json"
      },
      body:JSON.stringify({
        'token':token
      })
    })
    .then(function(resultado){
      console.log("se guardo")
    })







  })
  },function (err){
    console.log("N")
  })
}

messaging.onMessage(function(payload){
  let title = "title"
  let options = {
    body: "este es el mensaje"

  }
  let mensaje = new Notification(title,options)
})
  // This function is called from the pop-up menus to transfer to
  // a different page. Ignore if the value returned is a null string:
  
  // $(document).ready(function(){
  //     $("#titulo").keypress(function (e) {
  //       $("#error_msg").html("");
  //       var key = e.keyCode;
  //       $return = (key == 8 || key == 32 || (key >= 48 && key <= 57) || (key > 64 && key < 91) || (key > 96 && key < 123)  );
  //       if(!$return) {
  //         $("#error_msg").html("No special characters Please!");
  //         return false;
  //       }
  //     });
  // }
  



</script>
</body>
</html>